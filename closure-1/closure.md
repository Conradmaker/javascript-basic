# Closure

## Closure의 의미

closure가 무엇을 의미하는 것일까요? 

MDN에서는 다음과 같이 말하고 있습니다.

> A closure is the combination of a function and the lexical environment within that function was declared

해석해보면 "클로저는 함수와 함수가 선언되던 당시 정보를 담은 lexical environment의 조합이다" 이런 의미입니다.

lexical environment는 사전적 환경을 의미합니다. 

음 쉽게 좀 풀어서 말해보면 **선언당시의 환경에 대한 정보를 담는 객체** 즉, 구성환경이라고 할 수 있을것 같습니다. 

다시 closure을 해석해보면 다음과 같겠죠? 

> **함수**와 **"**그 함수가 선언될 당시의 **환경정보"** 사이의 **조합**

자 그럼 **선언될 당시**라고 하면 "**SCOPE**"가 떠오르죠?? 

실제로 closure는 scope와 밀접한 연관이 있습니다. 

* scope는 변수의 유효범위이며
* closure는 그 유효범위로 인한 현상\(상태\) 입니다.

자 그럼 또 다시한번 의미를 살펴보면 

{% hint style="info" %}
함수 내부에서 생성한 _**데이터**_와 그 _**유효범위**_로 인해 발생하는 특수한 **현상/ 상태**를 이야기 합니다. 
{% endhint %}



사실 closure라는 단어의 사전적 의미가 사실 더 쉽게 다가올 수 있습니다. 

#### closure : 닫혀있음 / 폐쇄성 / 완결성

그렇습니다. **Scope**는 폐쇄적이죠? 스코프에서 정보를 외부로 제공할수 있는 유일한 수단은 `return` 뿐입니다. 

만약 함수를 return 한다고 해도 변하지 않는 것이 바로 scope와 당시 lexical environment는 변하지 않습니다. 

자, "최소 선언시의 정보를 유지한다" 이게 핵심이며 전부입니다. 

## Closure의 장점

클로저를 잘 활용하면 다음과 같은 이점을 얻을 수 있습니다.

* 접근 권한 제어
* 지역변수 보호
* 데이터 보존 및 활용

접근 권한 제어와 지역변수 보호의 특성을 먼저 알아볼까요? 

 아래와 같은 코드가 있습니다. 

![](../.gitbook/assets/image%20%283%29.png)

이 코드의 스코프를 살펴보면

![&#x3141; &#xB294; &#xC2A4;&#xCF54;&#xD504;&#xC785;&#xB2C8;&#xB2E4;. ](../.gitbook/assets/image%20%2833%29.png)

a함수 내부에서 선언한 변수 x는 a안에있는 b함수 안에서도 사용할 수 있지만, a함수 외부에서는 사용할 수 없죠. 

 하지만, 객체지향 프로그래밍은 데이터 연동이 매우 활발해져야 합니다. 그래서 함수 내부에서만 활용되면 아무래도 한계가 있죠. 

위 코드를 아래와 같이 바꿀 수 있습니다.

![](../.gitbook/assets/image%20%2832%29.png)

무엇이 바뀌었을까요? 

* a에서 b함수를 반환해주었고, 
* 그 b가 반환된 a를 외부에서 c에 담아주었습니다. 

이렇게 되면 외부에서 x의 값을 얻을수는 있지만, x의 값을 바꿀수는 없습니다.  바꾸기 위해서는 내부에서 바꿀수 있는 수단 즉, 권한을 줘야만 합니다. 

함수를 `return`하는 대신에 객체에 `getter`와 `setter`를 담아보아요. 

![](../.gitbook/assets/image%20%2826%29.png)

이렇게 내부에서 반환을 통해 권한을 주면 외부에서도 값을 얻고 바꿀 수 있습니다. 

여기서 중요한 점은 변수명이 \_x로 바뀌었는데 이렇게 되면 외부로 

\_x라는 변수명이 전혀 노출되지 않아 지역변수를 보호할 수 있죠. 

다른예시를 보겠습니다.

![&#xC5EC;&#xAE30;&#xC11C; &#xC911;&#xC694;&#xD55C;&#xAC74; 10,11&#xBC88;&#xC785;&#xB2C8;&#xB2E4;. ](../.gitbook/assets/image%20%2870%29.png)

중요한점은 SCOPE는 정의될때 결정된다는 것입니다. 

그렇기 때문에 정의될때의 정보를 그대로 가지고 있을 수 있는 것이죠.

다른 예제도 있습니다. 

![](../.gitbook/assets/image%20%2854%29.png)

Inside Javascript라는 책에서는 이부분에 초점을 맞춰 

_**"클로저란 이미 생명주기가 끝난 외부함수의 변수를 활용하는것 "**_ 

이라고 말하고 있는데 꼭 아닌 부분도 있으니 잘 참고하시길 바랍니다!

